# OpenCode 验证与证据标准

本标准用于统一“什么算通过、如何留证据、何时可归档”。

---

## 0. 验证目标

- 确认实现与 OpenSpec 一致
- 确认核心回归通过
- 输出可追溯证据，支持复核与归档

---

## 1. 必做验证项

每次变更至少执行：

```text
/opsx-verify <CHANGE_ID>
```

按变更类型补充：

- 功能/后端：后端测试命令
- 前端：前端单测与必要 E2E
- BUG 修复：复现用例 + 回归用例

---

## 2. 通过判定

满足以下条件才可标记“验证通过”：

- 一致性校验通过（`/opsx-verify` 返回通过结论）
- 关键测试命令通过
- 无阻断级未修复项
- `verification-report.md` 完整

---

## 3. 证据最小集

每次验证输出至少包含：

- 命令摘要：执行了什么、结果是什么
- 证据路径：日志、截图、报告文件路径
- 风险说明：已知风险、影响范围、临时规避
- 结论：是否可归档

---

## 4. `verification-report.md` 推荐模板

```md
# Verification Report: <CHANGE_ID>
## 执行摘要
## 命令与结果
## 证据路径
## 风险说明
## 归档结论
```

---

## 5. 不通过处理

若验证失败：

1. 先定位根因
2. 仅做最小修复
3. 只执行必要回归
4. 更新 `verification-report.md` 再复验

---

## 6. 归档前检查

- [ ] 规范与实现一致
- [ ] 必要测试已通过
- [ ] `/opsx-verify <CHANGE_ID>` 已通过
- [ ] 证据与风险说明完整
- [ ] 已给出“可归档/不可归档”明确结论
